{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[ticketCount,setTicketCount]=useState(null);const[user,setUser]=useState(null);const[lastDrawnNumbers,setLastDrawnNumbers]=useState(null);const[isRoundOpen,setIsRoundOpen]=useState(false);useEffect(()=>{const fetchUser=async()=>{try{const res=await axios.get(\"http://localhost:4000/profile\",{withCredentials:true});setUser(res.data);}catch(err){setUser(null);}};fetchUser();},[]);useEffect(()=>{const fetchTicketCount=async()=>{try{const res=await axios.get(\"http://localhost:4000/count\",{withCredentials:true});setTicketCount(res.data);}catch(err){console.error(err);setTicketCount(null);}};fetchTicketCount();},[]);useEffect(()=>{const fetchLastDrawnNumbers=async()=>{try{const res=await axios.get(\"http://localhost:4000/lastDrawnNumbers\",{withCredentials:true});setLastDrawnNumbers(res.data.numbers);}catch(err){console.error(err);setLastDrawnNumbers(null);}};fetchLastDrawnNumbers();},[]);useEffect(()=>{const fetchRoundStatus=async()=>{try{const res=await axios.get(\"http://localhost:4000/activeRound\",{withCredentials:true});setIsRoundOpen(!!res.data.roundId);}catch(err){setIsRoundOpen(false);}};fetchRoundStatus();},[]);if(!user){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Loto 6/45\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Prijavi se:\"}),/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:4000/login\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Prijava\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Loto 6/45\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Prijavljen korisnik: \",user.name]}),/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:4000/logout\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Logout\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Broj upla\\u0107enih listi\\u0107a u trenutnom kolu:\",\" \",ticketCount!==null?ticketCount:\"prazno\"]}),lastDrawnNumbers?/*#__PURE__*/_jsxs(\"p\",{children:[\"Izvu\\u010Deni brojevi iz posljednjeg kola: \",lastDrawnNumbers]}):/*#__PURE__*/_jsx(\"p\",{children:\"Brojevi za prethodno kolo jo\\u0161 nisu izvu\\u010Deni\"}),isRoundOpen?/*#__PURE__*/_jsx(\"a\",{href:\"/TicketForm\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Uplata listi\\u0107a\"})}):/*#__PURE__*/_jsx(\"p\",{children:\"Uplate trenutno nisu omogu\\u0107ene.\"})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Home","ticketCount","setTicketCount","user","setUser","lastDrawnNumbers","setLastDrawnNumbers","isRoundOpen","setIsRoundOpen","fetchUser","res","get","withCredentials","data","err","fetchTicketCount","console","error","fetchLastDrawnNumbers","numbers","fetchRoundStatus","roundId","children","href","name"],"sources":["C:/Users/Stella/Documents/diplomski/web2/loto app/frontend/src/home/home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Home(){\r\n    const [ticketCount, setTicketCount] = useState(null);\r\n\r\n    const [user, setUser] = useState(null);\r\n\r\n    const [lastDrawnNumbers, setLastDrawnNumbers] = useState(null);\r\n\r\n    const [isRoundOpen, setIsRoundOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n      const fetchUser = async () => {\r\n        try {\r\n          const res = await axios.get(\"http://localhost:4000/profile\", { withCredentials: true });\r\n          setUser(res.data);\r\n        } catch (err) {\r\n          setUser(null);\r\n        }\r\n      };\r\n      fetchUser();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchTicketCount = async () => {\r\n        try {\r\n            const res = await axios.get(\"http://localhost:4000/count\", {\r\n            withCredentials: true \r\n            });\r\n            setTicketCount(res.data);\r\n        } catch (err) {\r\n            console.error(err);\r\n            setTicketCount(null);\r\n        }\r\n        };\r\n        fetchTicketCount();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchLastDrawnNumbers = async () => {\r\n            try {\r\n                const res = await axios.get(\r\n                    \"http://localhost:4000/lastDrawnNumbers\",\r\n                    { withCredentials: true }\r\n                );\r\n                setLastDrawnNumbers(res.data.numbers);\r\n            } catch (err) {\r\n                console.error(err);\r\n                setLastDrawnNumbers(null);\r\n            }\r\n        };\r\n        fetchLastDrawnNumbers();\r\n    }, []);\r\n\r\n      useEffect(() => {\r\n    const fetchRoundStatus = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:4000/activeRound\", {\r\n          withCredentials: true,\r\n        });\r\n        setIsRoundOpen(!!res.data.roundId);\r\n      } catch (err) {\r\n        setIsRoundOpen(false);\r\n      }\r\n    };\r\n    fetchRoundStatus();\r\n  }, []);\r\n\r\n    if (!user) {\r\n        return (\r\n        <div>\r\n            <h2>Loto 6/45</h2>\r\n            <p>Prijavi se:</p>\r\n            <a href=\"http://localhost:4000/login\">\r\n            <button>Prijava</button>\r\n            </a>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Loto 6/45</h2>\r\n            <p>Prijavljen korisnik: {user.name}</p>\r\n            <a href=\"http://localhost:4000/logout\">\r\n                <button>Logout</button>\r\n            </a>\r\n\r\n            <p>\r\n                Broj uplaćenih listića u trenutnom kolu:{\" \"}\r\n                {ticketCount !== null ? ticketCount : \"prazno\"}\r\n            </p>\r\n\r\n            {lastDrawnNumbers ? (\r\n                <p>Izvučeni brojevi iz posljednjeg kola: {lastDrawnNumbers}</p>\r\n            ) : (\r\n                <p>Brojevi za prethodno kolo još nisu izvučeni</p>\r\n            )}\r\n\r\n            {/* {user && (\r\n                <a href=\"/TicketForm\">\r\n                <button>Uplata listića</button>\r\n                </a>\r\n        )} */}\r\n            {isRoundOpen ? (\r\n                <a href=\"/TicketForm\">\r\n                <button>Uplata listića</button>\r\n                </a>\r\n            ) : (\r\n                <p>Uplate trenutno nisu omogućene.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}